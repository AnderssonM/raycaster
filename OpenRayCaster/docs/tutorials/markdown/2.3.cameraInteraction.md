
Camera & Mouse Interaction
-----------------


In the last two tutorials it was shown how to scale and rotate the model.
Rather than rotating, moving and scaling the model it is usually preferable to
move, rotate and zoom the camera instead.

1. **Camera Crew and Camera Instance**

    RayCaster contains a special class for this, called a CameraCrew, it bundles
    a number of different Camera and Inteeraction Classes from THREE.js. 
    See the THREE.js documentation for further information on how to control
    the cameras manually.

2. **Mouse interaction**

    Most likely you want to tie mouse interactivity to the camera, this is
    done by tying (or binding) the render-loop of the CameraCrew Instance to the
    rayCaster instance's render function.
    We also need to tell the camera crew to start listening to mouse 
    events.

    This is achieved as shown here.
    
        <script>
            cameraCrew.render=rayCaster.render.bind(rayCaster);
            cameraCrew.setupMouseEvents();
        </script>
        
    Which gives us this result. You should be able to use your mouse to rotate
    the camera around the center of the scene. The scroll wheel will zoom in 
    and out, while the arrow buttons can be used to pan the camera up/down and 
    left/right.
    
    <canvas id="rayCanvas" style="height:700px; width:770px; background: grey" ></canvas>
    
    (Try rotating model by click and drag, or zoom by scroll wheel)
   
    ***Full code for this exercise.***

<script id="tutorialScript" class="visible">
	var canvas_element = document.getElementById("rayCanvas");
	var options = OpenRayCaster.prototype.default_settings;
	options.renderTarget=canvas_element;

	var rayCaster = new OpenRayCaster(options);
	var  cameraCrew = new CameraCrew(rayCaster,30);
	cameraCrew.render=rayCaster.render.bind(rayCaster);
	cameraCrew.setupMouseEvents();

//	rayCaster.loadDataFile(root+'/sampleData/vec_x_g.vol');  
//	rayCaster.pixelVolume.scale.x = 1.2;
//	rayCaster.pixelVolume.scale.y = 0.8;
//	rayCaster.pixelVolume.scale.z = 0.25;
	rayCaster.render();

 i=1;
 dir = 1;
 _stop=false;
 function wait(){
     if (!_stop){
     setTimeout(step, 500);
 }
 }
 
 function loadVecB(){
     rayCaster.loadDataFile(root+'/sampleData/vec_b_g.vol'); 
 }
function step(){
    
  _stop=false;

            console.log("i:",root+'/sampleData/vec_x_g_'+i+'.vol');
            if (i<10){
               rayCaster.loadDataFile(root+'/sampleData/vec_x_g_0'+i+'.vol',wait); 
            }
            else{
                  rayCaster.loadDataFile(root+'/sampleData/vec_x_g_'+i+'.vol',wait); 
            }
        
           
            i=i+dir;
              if (i==50 ) { i=0 ;}
        
            
    
}       
function stop(){
    _stop=true;
}
      
</script>

<p style="text-align:center">
<a href="./api_use_1.3.html">&lt Prev</a>
</p>

